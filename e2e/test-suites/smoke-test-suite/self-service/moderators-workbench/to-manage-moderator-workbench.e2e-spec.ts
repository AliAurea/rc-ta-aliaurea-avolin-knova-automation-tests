import { StepLogger } from '../../../../../core/logger/step-logger';
import { PageHelper } from '../../../../components/html/page-helper';
import {
    SelfServiceModerateWorkbenchConstant
} from '../../../../page-objects/pages/self-service-moderate-workbench/self-service-moderate-workbench.constant';
import {
    SelfServiceModerateWorkbenchPageHelper
} from '../../../../page-objects/pages/self-service-moderate-workbench/self-service-moderate-workbench.helper';
import { SelfServiceHomePageHelper } from '../../../../page-objects/pages/self-service/self-service-home-page.helper';
import { SelfServiceLoginPageHelper } from '../../../../page-objects/pages/self-service/self-service-login.helper';
import { SuiteNames } from '../../../helpers/suite-names';

describe(SuiteNames.smokeSuite, () => {
    let loginPageHelper: SelfServiceLoginPageHelper;

    beforeAll(async () => {
        loginPageHelper = SelfServiceLoginPageHelper.getInstance();
        await PageHelper.maximiseBrowser();
    });

    beforeEach(async () => {
        await SelfServiceLoginPageHelper.logout();
        await PageHelper.switchToFirstTab();
        await loginPageHelper.goTo();
        await SelfServiceLoginPageHelper.loginAsAdmin();
    });

    // Jira References - KNOV-2594
    it('Verify on landing page Moderate is present as  a link. - [22442940]', async () => {
        // Auto generated by aurea-automation - util on Fri, 03 May 2019 15:58:39 GMT

        StepLogger.caseId = 22442940;

        // Step 1 and 2 are covered in beforeEach
        StepLogger.stepId(1);
        StepLogger.step('Log in to the application.');
        StepLogger.verification('Log in page is displayed.');

        StepLogger.stepId(2);
        StepLogger.step('Log in to the application.');
        StepLogger.verification('User is able to log in to the application.');
        await SelfServiceHomePageHelper.verifyWelcomeLabelDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Search and verify Moderate  is present at the right side of the page.');
        StepLogger.verification('Moderate is present on th epage.');
        await SelfServiceHomePageHelper.verifyModerateLinkDisplayed();
    });

    // Jira References - KNOV-2593
    it('Verify by clicking on moderate moderate workbench page is displayed. - [22442939]', async () => {
        // Auto generated by aurea-automation - util on Fri, 03 May 2019 15:58:38 GMT

        StepLogger.caseId = 22442939;
        StepLogger.preCondition('Click on Moderate and select an RF/Comunity value');
        await SelfServiceHomePageHelper.clickOnModerateLink();
        await SelfServiceModerateWorkbenchPageHelper.selectRfComunityOption(
            SelfServiceModerateWorkbenchConstant.testData.rfCommunity);

        StepLogger.stepId(1);
        StepLogger.step('Click on Moderate.');
        await SelfServiceHomePageHelper.clickOnModerateLink();
        StepLogger.verification('Moderate workbench is displayed.');
        await SelfServiceModerateWorkbenchPageHelper.verifyWorkbenchPageDisplayed();

        StepLogger.stepId(2);
        StepLogger.step('verify tools section is present.');
        StepLogger.verification('Tools sections is present with a view/Edit resolution Flow members hyperlink.');
        await SelfServiceModerateWorkbenchPageHelper.verifyToolsSection();

        StepLogger.stepId(3);
        StepLogger.step('A drop down list is present for community or RF selection.');
        StepLogger.verification('Drop down list is present.');
        await SelfServiceModerateWorkbenchPageHelper.verifySelectRfCommunityDropdownDisplayed();
    });

    // Jira References - KNOV-2595
    it('Verify that after selecting a specific RF/Community the page gets refreshed. - [22442942]', async () => {
        // Auto generated by aurea-automation - util on Fri, 03 May 2019 15:58:39 GMT

        StepLogger.caseId = 22442942;
        StepLogger.preCondition('Click on Moderate link');
        await SelfServiceHomePageHelper.clickOnModerateLink();

        StepLogger.stepId(1);
        StepLogger.step('Click on the drop down list.');
        await SelfServiceModerateWorkbenchPageHelper.clickRfComunityDropdown();
        StepLogger.verification('It displays the results for RF and Community .');
        await SelfServiceModerateWorkbenchPageHelper.verifyRfComunityDropdownOptionsDisplated();

        StepLogger.stepId(2);
        StepLogger.step('Select any community.');
        await SelfServiceModerateWorkbenchPageHelper.selectARandomRfComunity();
        StepLogger.verification('the screen gets refreshed as per the selection.');
        // This action is not verifiable

        StepLogger.stepId(3);
        StepLogger.step(`Verify 2 tables are present :-
        Webcase Alerts
        Content alerts`);
        StepLogger.verification('2 Tables are displayed.');
        await SelfServiceModerateWorkbenchPageHelper.verifyModeratorWorkbenchTablesDisplayed();
    });

    // Jira References - KNOV-2603
    it('Verify the user gets transferred to content tab after clicking on any result of community. - [22442945]', async () => {
        // Auto generated by aurea-automation - util on Fri, 03 May 2019 15:58:38 GMT

        StepLogger.caseId = 22442945;
        StepLogger.preCondition('Click on Moderate and select an RF/Comunity value');
        await SelfServiceHomePageHelper.clickOnModerateLink();
        await SelfServiceModerateWorkbenchPageHelper.selectRfComunityOption(
            SelfServiceModerateWorkbenchConstant.testData.productDiscussionCommunity);

        StepLogger.stepId(1);
        StepLogger.step('Click on value of column Title under content alerts.');
        await SelfServiceModerateWorkbenchPageHelper.clickOnATitleLink();
        StepLogger.verification('the control goes to content tab.');
        await SelfServiceModerateWorkbenchPageHelper.verifyTabHighlighted(
            SelfServiceModerateWorkbenchConstant.names.content);

        StepLogger.stepId(2);
        StepLogger.step('Verify it displays Sensitive words on the screen.');
        StepLogger.verification('It displays the sensitive word on the screen.');
        await SelfServiceModerateWorkbenchPageHelper.verifySensityWordsTextTidisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Verify Edit and delete buttons along with highly Alert sensitivity is present on screen.');
        StepLogger.verification('Edit and delete buttons along with highly Alert sensitivity is present on screen.');
        await SelfServiceModerateWorkbenchPageHelper.verifyEditAndDeleteButtonsDisplayed();
    });

    // Jira References - KNOV-2598
    it('Verify after selecting RF from the drop down View/Edit Resolution Flow Members is displayed on screen. - [22442952]', async () => {
        // Auto generated by aurea-automation - util on Fri, 03 May 2019 15:58:39 GMT

        StepLogger.caseId = 22442952;
        StepLogger.preCondition('Click on Moderate link');
        await SelfServiceHomePageHelper.clickOnModerateLink();

        StepLogger.stepId(1);
        StepLogger.step('Click on the drop down list .');
        await SelfServiceModerateWorkbenchPageHelper.clickRfComunityDropdown();
        StepLogger.verification('It represents RF and community.');
        await SelfServiceModerateWorkbenchPageHelper.verifyRfComunityDropdownOptionsDisplated();

        StepLogger.stepId(2);
        StepLogger.step('Select any RF.');
        await SelfServiceModerateWorkbenchPageHelper.selectRfComunityOption(
            SelfServiceModerateWorkbenchConstant.testData.rfCommunity);
        StepLogger.verification('The screen refreshed as per the selected RF.');
        // This action is not verifiable

        StepLogger.stepId(3);
        StepLogger.step(`Verify View/Edit Resolution Flow Members hyperlink is present under tools.
        Click on View/Edit Resolution Flow Members.`);
        StepLogger.verification('View/Edit Members  of Resolution Flow window is displayed.');
        await SelfServiceModerateWorkbenchPageHelper.verifyViewEditResolutionFlowMembersLinkDisplayed();
    });

    // Jira References - KNOV-2599
    it('Verify the user is able to search a already present user. - [22442954]', async () => {
        // Auto generated by aurea-automation - util on Fri, 03 May 2019 15:58:38 GMT

        StepLogger.caseId = 22442954;
        StepLogger.preCondition('Navigate to "navigateToViewEditMembersResolutionFlow" page');
        await SelfServiceModerateWorkbenchPageHelper.navigateToViewEditMembersResolutionFlow();

        StepLogger.stepId(1);
        StepLogger.step('Enter some user name in the field User .');
        await SelfServiceModerateWorkbenchPageHelper.typeUsername(
            SelfServiceModerateWorkbenchConstant.testData.admin);
        StepLogger.verification('User is able to enter the  the user name.');
        await SelfServiceModerateWorkbenchPageHelper.verifyUsernameFieldValue(
            SelfServiceModerateWorkbenchConstant.testData.admin);

        StepLogger.stepId(2);
        StepLogger.step('Click on the search icon .');
        await SelfServiceModerateWorkbenchPageHelper.clickOnSearchIcon();
        StepLogger.verification('The matched results are displayed on screen as per the entered user name.');
        await SelfServiceModerateWorkbenchPageHelper.verifySearchResultsDisplayed(
            SelfServiceModerateWorkbenchConstant.testData.admin);

        StepLogger.stepId(3);
        StepLogger.step('Click on the name of the user name.');
        await SelfServiceModerateWorkbenchPageHelper.clickOnASearchResultsDisplayed(
            SelfServiceModerateWorkbenchConstant.testData.admin);
        StepLogger.verification('Edit user details window is displayed.');
        await SelfServiceModerateWorkbenchPageHelper.verifyEditUserDetailsPageDisplayed();
    });
});
