import { StepLogger } from '../../../../../core/logger/step-logger';
import { PageHelper } from '../../../../components/html/page-helper';
import { SelfServiceModerateWorkbenchPageHelper } from '../../../../page-objects/pages/self-service-moderate-workbench/self-service-moderate-workbench.helper';
import { SelfServiceHomePageHelper } from '../../../../page-objects/pages/self-service/self-service-home-page.helper';
import { SelfServiceLoginPageHelper } from '../../../../page-objects/pages/self-service/self-service-login.helper';
import { SuiteNames } from '../../../helpers/suite-names';

describe(SuiteNames.smokeSuite, () => {
    let loginPageHelper: SelfServiceLoginPageHelper;

    beforeAll(async () => {
        loginPageHelper = SelfServiceLoginPageHelper.getInstance();
        await PageHelper.maximiseBrowser();
    });

    beforeEach(async () => {
        await SelfServiceLoginPageHelper.logout();
        await PageHelper.switchToFirstTab();
        await loginPageHelper.goTo();
        await SelfServiceLoginPageHelper.loginAsAdmin();
    });

    // Jira References - KNOV-2544
    it(`Verify user is able to view "Moderate" button in the Home page of
    Knova Self Service Portal - [22946727]`, async () => {
        // Auto generated by aurea-automation - util on Thu, 02 May 2019 22:26:03 GMT

        StepLogger.caseId = 22946727;

        // Step 1 is covered in beforeEach
        StepLogger.stepId(1);
        StepLogger.step(`Launch the Knova Self Service Portal with Admin Credentials as specified in
        the pre-condition [C22937176]`);
        StepLogger.verification('Admin User should be able to login to the Knova Self Service Portal successfully');

        StepLogger.stepId(2);
        StepLogger.step('Verify "Moderate" button is available for User in the top right corner');
        StepLogger.verification('"Moderate" button is available for User in the top right corner');
        await SelfServiceHomePageHelper.verifyModerateLinkDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Click on the "Moderate" button');
        await SelfServiceHomePageHelper.clickOnModerateLink();
        StepLogger.verification(`User should get navigated to the "Moderator Workbench" page successfully
        without errors`);
        await SelfServiceModerateWorkbenchPageHelper.verifyWorkbenchPageDisplayed();
    });

    // Jira References - KNOV-2550
    it(`Verify that admin user is able to view all the Active WebCases in the WebCases tab of Knova Self
    Service Portal - [22946739]`, async () => {
        // Auto generated by aurea-automation - util on Thu, 02 May 2019 22:26:02 GMT

        StepLogger.caseId = 22946739;
        StepLogger.stepId(1);
        StepLogger.step('Click on the "Moderate" button as per the pre-condition [C22946727]');
        await SelfServiceHomePageHelper.clickOnModerateLink();
        StepLogger.verification(`User should get navigated to the "Moderator Workbench" page successfully
        without errors`);
        await SelfServiceModerateWorkbenchPageHelper.verifyWorkbenchPageDisplayed();

        StepLogger.stepId(2);
        StepLogger.step('Click on the WebCases tab available in the top below TD_Microsite Header');
        await SelfServiceModerateWorkbenchPageHelper.clickOnWebCasesTab();
        StepLogger.verification('User should get navigated to the "WebCases" tab successfully');
        await SelfServiceModerateWorkbenchPageHelper.verifyAcitiveWebCasesDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Verify that admin user is able to view all the Active WebCases in the WebCases tab');
        StepLogger.verification('User should be able to view the Active WebCases in the WebCases tab');
        await SelfServiceModerateWorkbenchPageHelper.verifyActiveWebCasesContainerDisplayed();
    });

    // Jira References - KNOV-2545
    it(`Verify the tabs displayed at the top of the page when user clicks on "Moderate"
    button in Home page of Knova Self Service Portal - [22946729]`, async () => {
        // Auto generated by aurea-automation - util on Thu, 02 May 2019 22:26:02 GMT

        StepLogger.caseId = 22946729;

        // Step 1 is covered in beforeEach
        StepLogger.stepId(1);
        StepLogger.step(`Launch the Knova Self Service Portal with Admin Credentials as specified in the
        pre-condition [C22937176]`);
        StepLogger.verification('Admin User should be able to login to the Knova Self Service Portal successfully');

        StepLogger.stepId(2);
        StepLogger.step('Click on the "Moderate" button available for User in the top right corner');
        await SelfServiceHomePageHelper.clickOnModerateLink();
        StepLogger.verification('User should get navigated to the "Moderator Workbench" page successfully');
        await SelfServiceModerateWorkbenchPageHelper.verifyWorkbenchPageDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Verify the tabs displayed at the top of the page under "TD_Microsite" Header');
        StepLogger.verification(`Below tabs should be displayed
        Moderator Workbench
        Content
        WebCases
        Users`);
        await SelfServiceModerateWorkbenchPageHelper.verifyWorkbenchTabs();
    });

    // Jira References - KNOV-2547
    it(`Verify "Select RF/Community" dropdown field is available in the WebCases tab of  Knova
    Self Service Portal - [22946735]`, async () => {
        // Auto generated by aurea-automation - util on Thu, 02 May 2019 22:26:03 GMT

        StepLogger.caseId = 22946735;
        StepLogger.stepId(1);
        StepLogger.step('Click on the "Moderate" button as per the pre-condition [C22946727]');
        await SelfServiceHomePageHelper.clickOnModerateLink();
        StepLogger.verification(`User should get navigated to the "Moderator Workbench" page successfully
        without errors`);
        await SelfServiceModerateWorkbenchPageHelper.verifyWorkbenchPageDisplayed();

        StepLogger.stepId(2);
        StepLogger.step('Click on the WebCases tab available in the top below TD_Microsite Header');
        await SelfServiceModerateWorkbenchPageHelper.clickOnWebCasesTab();
        StepLogger.verification('User should get navigated to the "WebCases" tab successfully');
        await SelfServiceModerateWorkbenchPageHelper.verifyAcitiveWebCasesDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Verify "Select RF/Community" dropdown field is available in the WebCases tab');
        StepLogger.verification('"Select RF/Community" dropdown field should be available in the WebCases tab');
        await SelfServiceModerateWorkbenchPageHelper.verifySelectRfCommunityDropdownDisplayed();
    });

    // Jira References - KNOV-2546
    it(`Verify click on WebCases tab navigates admin user to the WebCases tab of Knova Self
    Service Portal - [22946731]`, async () => {
        // Auto generated by aurea-automation - util on Thu, 02 May 2019 22:26:03 GMT

        StepLogger.caseId = 22946731;
        StepLogger.stepId(1);
        StepLogger.step('Click on the "Moderate" button as per the pre-condition [C22946727]');
        await SelfServiceHomePageHelper.clickOnModerateLink();
        StepLogger.verification(`User should get navigated to the "Moderator Workbench" page successfully
        without errors`);
        await SelfServiceModerateWorkbenchPageHelper.verifyWorkbenchPageDisplayed();

        StepLogger.stepId(2);
        StepLogger.step('Verify WebCases tab is available in the top below TD_Microsite Header');
        StepLogger.verification('WebCases tab should be available in the top below TD_Microsite Header');
        await SelfServiceModerateWorkbenchPageHelper.verifyWebCasesTabDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Click on the WebCases tab');
        await SelfServiceModerateWorkbenchPageHelper.clickOnWebCasesTab();
        StepLogger.verification('User should get navigated to the "WebCases" page successfully without errors');
        await SelfServiceModerateWorkbenchPageHelper.verifyAcitiveWebCasesDisplayed();
    });
});
