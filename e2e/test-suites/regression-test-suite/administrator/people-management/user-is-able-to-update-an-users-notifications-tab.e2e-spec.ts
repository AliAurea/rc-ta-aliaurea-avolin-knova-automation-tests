import { StepLogger } from '../../../../../core/logger/step-logger';
import { PageHelper } from '../../../../components/html/page-helper';
import {
    SelfServiceEditProfileConstant
} from '../../../../page-objects/pages/self-service-profile-editor/self-service-edit-profile.contant';
import {
    SelfServiceEditProfilePageHelper
} from '../../../../page-objects/pages/self-service-profile-editor/self-service-edit-profile.helper';
import { SelfServiceHomePageHelper } from '../../../../page-objects/pages/self-service/self-service-home-page.helper';
import { SelfServiceLoginPageHelper } from '../../../../page-objects/pages/self-service/self-service-login.helper';
import { SuiteNames } from '../../../helpers/suite-names';

describe(SuiteNames.regressionSuite, () => {
    let loginPageHelper: SelfServiceLoginPageHelper;

    beforeAll(async () => {
        loginPageHelper = SelfServiceLoginPageHelper.getInstance();
        await PageHelper.maximiseBrowser();
        await loginPageHelper.goTo();
    });

    beforeEach(async () => {
        await PageHelper.switchToFirstTab();
        await SelfServiceHomePageHelper.clickOnLogOutIfPresent();
        await loginPageHelper.goTo();
        await SelfServiceLoginPageHelper.loginAsAdmin();
    });

    // Jira References - KNOV-2291
    it('Verify the  Profile Editor screen is displayed. - [22901998]', async () => {
        // Auto generated by aurea-automation - util on Thu, 25 Apr 2019 21:20:01 GMT

        StepLogger.caseId = 22901998;
        // Step 1 is covered in beforeEach
        StepLogger.stepId(1);
        StepLogger.step('Log in to the application.');
        StepLogger.verification('user is able to log in to the application.');
        await SelfServiceHomePageHelper.verifyWelcomeLabelDisplayed();

        StepLogger.stepId(2);
        StepLogger.step('Click on Edit profile.');
        await SelfServiceHomePageHelper.clickOnEditProfile();
        StepLogger.verification('The profile editor is displayed.');
        await SelfServiceEditProfilePageHelper.verifyEditProfilePageDisplayed();

        StepLogger.stepId(3);
        StepLogger.step('Verify that preferences tab is highlighted with save and cancel buttons.');
        await SelfServiceEditProfilePageHelper.verifyTabHighlighted(SelfServiceEditProfileConstant.names.preferences);
        StepLogger.verification('Save and cancel are 2 buttons displayed on screen.');
        await SelfServiceEditProfilePageHelper.verifySaveAndCancelButtonsDisplayed();
    });

    // Jira References - KNOV-2301
    it('Verify the user is able to perform expand all and collapse all functions. - [22902490]', async () => {
        // Auto generated by aurea-automation - util on Thu, 25 Apr 2019 21:20:00 GMT

        StepLogger.caseId = 22902490;
        StepLogger.preCondition('Navigate to Notifications tab');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTab();

        StepLogger.stepId(1);
        StepLogger.step('Click on Expand all button.');
        await SelfServiceEditProfilePageHelper.clickOnExpandAllButton();
        StepLogger.verification('All the 4 sections are expanded with respective events.');
        await SelfServiceEditProfilePageHelper.verifyAllSectionsAreExpanded();

        StepLogger.stepId(2);
        StepLogger.step('Click on collapse all button.');
        await SelfServiceEditProfilePageHelper.clickOnCollapseAllButton();
        StepLogger.verification('All the 4 sections are collapse with the respective events.');
        await SelfServiceEditProfilePageHelper.verifyAllSectionsAreCollapsed();

        StepLogger.stepId(3);
        StepLogger.step('Click on cancel button.');
        await SelfServiceEditProfilePageHelper.clickOnCancelButton();
        StepLogger.verification('The window gets closed.');
        await SelfServiceHomePageHelper.verifyWelcomeLabelDisplayed();
    });

    // Jira References - KNOV-2300
    it('Verify the User is able to uncheck items listed under Collaboration Events. - [22902489]', async () => {
        // Auto generated by aurea-automation - util on Thu, 25 Apr 2019 21:20:00 GMT

        StepLogger.caseId = 22902489;
        StepLogger.preCondition('Navigate to Notifications tab');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTab();

        StepLogger.stepId(1);
        StepLogger.step('Expand the collaboration events.');
        await SelfServiceEditProfilePageHelper.clickOnCollaboationEventsLink();
        StepLogger.verification('The events under collaboration is expanded.');
        await SelfServiceEditProfilePageHelper.verifyCollaborationEventsIsExpanded();

        StepLogger.stepId(2);
        StepLogger.step('De Select the event under collaboration events.');
        const name = await SelfServiceEditProfilePageHelper.unmarkAnCollabEventsOption();
        StepLogger.verification('The event is de selected.');
        await SelfServiceEditProfilePageHelper.verifyCollabEventsEventsCheckboxIsUnmarked(name);

        StepLogger.stepId(3);
        StepLogger.step('Click on save button.');
        await SelfServiceEditProfilePageHelper.clickOnSaveButton();
        StepLogger.verification('The changes are saved.');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTabAndExpandAll();
        await SelfServiceEditProfilePageHelper.verifyCollabEventsEventsCheckboxIsUnmarked(name);
    });

    // Jira References - KNOV-2293
    it('Verify the User is able to check  items listed under  authoring Events. - [22902001]', async () => {
        // Auto generated by aurea-automation - util on Thu, 25 Apr 2019 21:20:01 GMT

        StepLogger.caseId = 22902001;
        StepLogger.preCondition('Navigate to Notifications tab');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTab();

        StepLogger.stepId(1);
        StepLogger.step('Expand the Authoring Events.');
        await SelfServiceEditProfilePageHelper.clickOnAuthoringEventsLink();
        StepLogger.verification('The events are expanded under authoring.');
        await SelfServiceEditProfilePageHelper.verifyAuthoringEventsIsExpanded();

        StepLogger.stepId(2);
        StepLogger.step('Select one or more Events by clicking the check box.');
        const name = await SelfServiceEditProfilePageHelper.markAnAuthoringEventsOption();
        StepLogger.verification('One or more events are selected.');
        await SelfServiceEditProfilePageHelper.verifyAuthoringEventsCheckboxIsMarked(name);

        StepLogger.stepId(3);
        StepLogger.step('Click on save button.');
        await SelfServiceEditProfilePageHelper.clickOnSaveButton();
        StepLogger.verification('Changes are saved.');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTabAndExpandAll();
        await SelfServiceEditProfilePageHelper.verifyAuthoringEventsCheckboxIsMarked(name);
    });

    // Jira References - KNOV-2296
    it('Verify the User is able to check items listed under Feedback Events. - [22902484]', async () => {
        // Auto generated by aurea-automation - util on Thu, 25 Apr 2019 21:20:01 GMT

        StepLogger.caseId = 22902484;
        StepLogger.preCondition('Navigate to Notifications tab');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTab();

        StepLogger.stepId(1);
        StepLogger.step('Expand Feedback events.');
        await SelfServiceEditProfilePageHelper.clickOnFeedbackEventsLink();
        StepLogger.verification('It gets expanded.');
        await SelfServiceEditProfilePageHelper.verifyFeedbackEventsIsExpanded();

        StepLogger.stepId(2);
        StepLogger.step('Select events under feedback.');
        const name = await SelfServiceEditProfilePageHelper.markAFeedbackEventsCheckbox();
        StepLogger.verification('The events are selected.');
        await SelfServiceEditProfilePageHelper.verifyFeedbackEventsCheckboxIsMarked(name);

        StepLogger.stepId(3);
        StepLogger.step('Verify the user can change the radio buttons for Immediately , daily and weekly (frequency for feedback)');
        const rdName = await SelfServiceEditProfilePageHelper.clickOnAFeedbackEventsRadioButton();
        StepLogger.verification('User changes the frequency for feedback.');
        await SelfServiceEditProfilePageHelper.verifyFeedbackEventsRadiobuttonIsSelected(rdName);

        StepLogger.stepId(4);
        StepLogger.step('Click on save button.');
        await SelfServiceEditProfilePageHelper.clickOnSaveButton();
        StepLogger.verification('The changes are saved.');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTabAndExpandAll();
        await SelfServiceEditProfilePageHelper.verifyFeedbackEventsCheckboxAndRadioButtonAreSelected(name, rdName);
    });

    // Jira References - KNOV-2294
    it('Verify the user is able to save the changes by clicking on save button. - [22902479]', async () => {
        // Auto generated by aurea-automation - util on Thu, 25 Apr 2019 21:20:01 GMT

        StepLogger.caseId = 22902479;
        StepLogger.preCondition('Navigate to Notifications tab');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTab();

        StepLogger.stepId(1);
        StepLogger.step('Click on Expand all button.');
        await SelfServiceEditProfilePageHelper.clickOnExpandAllButton();
        StepLogger.verification('All the 4 sections are expanded with respective events.');
        await SelfServiceEditProfilePageHelper.verifyAllSectionsAreExpanded();

        StepLogger.stepId(2);
        StepLogger.step('Select some events under any events category.');
        const name = await SelfServiceEditProfilePageHelper.markACollabEventsCheckbox();
        StepLogger.verification('Events are selected.');
        await SelfServiceEditProfilePageHelper.verifyCollabEventsCheckboxIsMarked(name);

        StepLogger.stepId(3);
        StepLogger.step('Click on save.');
        await SelfServiceEditProfilePageHelper.clickOnSaveButton();
        StepLogger.verification('the changes are saved for the user profile.');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTabAndExpandAll();
        await SelfServiceEditProfilePageHelper.verifyCollabEventsCheckboxIsMarked(name);
    });

    // Jira References - KNOV-2299
    it('Verify the User is able to uncheck items listed under authoring Events. - [22902488]', async () => {
        // Auto generated by aurea-automation - util on Thu, 25 Apr 2019 21:20:01 GMT

        StepLogger.caseId = 22902488;
        StepLogger.preCondition('Navigate to Notifications tab');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTab();

        StepLogger.stepId(1);
        StepLogger.step('Expand the Authoring Events.');
        await SelfServiceEditProfilePageHelper.clickOnAuthoringEventsLink();
        StepLogger.verification('Authoring are expanded.');
        await SelfServiceEditProfilePageHelper.verifyAuthoringEventsIsExpanded();

        StepLogger.stepId(2);
        StepLogger.step('De select one or more Events by clicking the check box.');
        const name = await SelfServiceEditProfilePageHelper.unmarkAnAuthoringEventsCheckbox();
        StepLogger.verification('The events are de selected by unchecking the check box.');
        await SelfServiceEditProfilePageHelper.verifyAuthoringEventsCheckboxIsUnmarked(name);

        StepLogger.stepId(3);
        StepLogger.step('Click on save button.');
        await SelfServiceEditProfilePageHelper.clickOnSaveButton();
        StepLogger.verification('The changes are saved.');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTabAndExpandAll();
        await SelfServiceEditProfilePageHelper.verifyAuthoringEventsCheckboxIsUnmarked(name);
    });

    // Jira References - KNOV-2297
    it('Verify the User is able to check items listed under Web cases Events. - [22902485]', async () => {
        // Auto generated by aurea-automation - util on Thu, 25 Apr 2019 21:20:01 GMT

        StepLogger.caseId = 22902485;
        StepLogger.preCondition('Navigate to Notifications tab');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTab();

        StepLogger.stepId(1);
        StepLogger.step('Expand the web cases events');
        await SelfServiceEditProfilePageHelper.clickWebCasesEventsLink();
        StepLogger.verification('It gets expanded.');
        await SelfServiceEditProfilePageHelper.verifyWebCasesEventsIsExpanded();

        StepLogger.stepId(2);
        StepLogger.step('Select the event by checking the checkbox for an event.');
        const name = await SelfServiceEditProfilePageHelper.unmarkAWebCasesEventsCheckbox();
        StepLogger.verification('The event is selected.');
        await SelfServiceEditProfilePageHelper.verifyWebCasesEventsCheckboxIsUnmarked(name);

        StepLogger.stepId(3);
        StepLogger.step('Click on save button.');
        await SelfServiceEditProfilePageHelper.clickOnSaveButton();
        StepLogger.verification('The changes are saved .');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTabAndExpandAll();
        await SelfServiceEditProfilePageHelper.verifyWebCasesEventsCheckboxIsUnmarked(name);
    });

    // Jira References - KNOV-2295
    it('Verify the User is able to check items listed under  Collaboration Events. - [22902482]', async () => {
        // Auto generated by aurea-automation - util on Thu, 25 Apr 2019 21:20:01 GMT

        StepLogger.caseId = 22902482;
        StepLogger.preCondition('Navigate to Notifications tab');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTab();

        StepLogger.stepId(1);
        StepLogger.step('Expand the collaboration events.');
        await SelfServiceEditProfilePageHelper.clickOnCollaboationEventsLink();
        StepLogger.verification('The events under collaboration is expanded.');
        await SelfServiceEditProfilePageHelper.verifyCollaborationEventsIsExpanded();

        StepLogger.stepId(2);
        StepLogger.step('Select the event under collaboration events.');
        const name = await SelfServiceEditProfilePageHelper.markACollabEventsCheckbox();
        StepLogger.verification('The event is selected.');
        await SelfServiceEditProfilePageHelper.verifyCollabEventsCheckboxIsMarked(name);

        StepLogger.stepId(3);
        StepLogger.step('Click on save button.');
        await SelfServiceEditProfilePageHelper.clickOnSaveButton();
        StepLogger.verification('The changes are saved.');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTabAndExpandAll();
        await SelfServiceEditProfilePageHelper.verifyCollabEventsCheckboxIsMarked(name);
    });

    // Jira References - KNOV-2292
    it('Verify the user is able to view 4 sections. - [22902000]', async () => {
        // Auto generated by aurea-automation - util on Thu, 25 Apr 2019 21:20:01 GMT

        StepLogger.caseId = 22902000;
        StepLogger.stepId(1);
        StepLogger.step('Go to notifications tab.');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTab();
        StepLogger.verification('Notification screen is displayed.');
        await SelfServiceEditProfilePageHelper.verifyTabHighlighted(SelfServiceEditProfileConstant.names.notifications);

        StepLogger.stepId(2);
        StepLogger.step('Verify expand all and collapse all are the 2 buttons present on the screen.');
        StepLogger.verification('Expand all and Collapse all are the 2 buttons present on screen.');
        await SelfServiceEditProfilePageHelper.verifyExpandAllButtonDisplayed();
        await SelfServiceEditProfilePageHelper.verifyCollapseAllButtonDisplayed();

        StepLogger.stepId(3);
        StepLogger.step(`verify that 4 sections are displayed.
        Authoring Events
        Collaboration Events
        Feedback Events
        Web Cases Events`);
        StepLogger.verification(`4 sections are displayed.
        Authoring Events
        Collaboration Events
        Feedback Events
        Web Cases Events`);
        await SelfServiceEditProfilePageHelper.verifyAllSectionsDisplayed();
    });

    // Jira References - KNOV-2302
    it('Verify the User is able to uncheck items listed under feedback Events. - [22902494]', async () => {
        // Auto generated by aurea-automation - util on Thu, 25 Apr 2019 21:20:00 GMT

        StepLogger.caseId = 22902494;
        StepLogger.preCondition('Click on Notifications tab');
        await SelfServiceHomePageHelper.clickOnEditProfile();
        await SelfServiceEditProfilePageHelper.clickOnTab(SelfServiceEditProfileConstant.names.notifications);

        StepLogger.stepId(1);
        StepLogger.step('Expand Feedback events.');
        await SelfServiceEditProfilePageHelper.clickOnFeedbackEventsLink();
        StepLogger.verification('It gets expanded.');
        await SelfServiceEditProfilePageHelper.verifyFeedbackEventsIsExpanded();

        StepLogger.stepId(2);
        StepLogger.step('De Select events under feedback.');
        const name = await SelfServiceEditProfilePageHelper.unmarkAFeedbackCasesEventsCheckbox();
        StepLogger.verification('The events are de selected.');
        await SelfServiceEditProfilePageHelper.verifyFeedbackEventsCheckboxIsUnmarked(name);

        StepLogger.stepId(3);
        StepLogger.step('Click on save button.');
        await SelfServiceEditProfilePageHelper.clickOnSaveButton();
        StepLogger.verification('The changes are saved.');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTabAndExpandAll();
        await SelfServiceEditProfilePageHelper.verifyFeedbackEventsCheckboxIsUnmarked(name);
    });

    // Jira References - KNOV-2298
    it('Verify the User is able to uncheck items listed under Web cases Events. - [22902486]', async () => {
        // Auto generated by aurea-automation - util on Thu, 25 Apr 2019 21:20:01 GMT

        StepLogger.caseId = 22902486;
        StepLogger.preCondition('Navigate to Notifications tab');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTab();

        StepLogger.stepId(1);
        StepLogger.step('Expand the web cases events');
        await SelfServiceEditProfilePageHelper.clickWebCasesEventsLink();
        StepLogger.verification('It gets expanded.');
        await SelfServiceEditProfilePageHelper.verifyWebCasesEventsIsExpanded();

        StepLogger.stepId(2);
        StepLogger.step('De Select the event by checking the checkbox for an event.');
        const name = await SelfServiceEditProfilePageHelper.unmarkAWebCasesEventsCheckbox();
        StepLogger.verification('The event is de selected.');
        await SelfServiceEditProfilePageHelper.verifyWebCasesEventsCheckboxIsUnmarked(name);

        StepLogger.stepId(3);
        StepLogger.step('Click on save button.');
        await SelfServiceEditProfilePageHelper.clickOnSaveButton();
        StepLogger.verification('The changes are saved .');
        await SelfServiceEditProfilePageHelper.navigateEditProfileNotificationsTabAndExpandAll();
        await SelfServiceEditProfilePageHelper.verifyWebCasesEventsCheckboxIsUnmarked(name);
    });
});
